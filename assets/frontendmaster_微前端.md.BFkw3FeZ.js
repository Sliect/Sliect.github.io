import{_ as e,c as i,o as a,a4 as l}from"./chunks/framework.Cz4QOLCt.js";const f=JSON.parse('{"title":"微前端","description":"","frontmatter":{},"headers":[],"relativePath":"frontendmaster/微前端.md","filePath":"frontendmaster/微前端.md"}'),o={name:"frontendmaster/微前端.md"},t=l('<h1 id="微前端" tabindex="-1">微前端 <a class="header-anchor" href="#微前端" aria-label="Permalink to &quot;微前端&quot;">​</a></h1><p>核心价值：技术栈无关，让老项目能平滑迁移，确保新项目不被局限</p><h2 id="ifame" tabindex="-1">ifame <a class="header-anchor" href="#ifame" aria-label="Permalink to &quot;ifame&quot;">​</a></h2><p>主子应用同源，共享cookie数据，也可用来共享登录态，存在同名属性值被覆盖的风险</p><p>缺点：</p><ol><li>刷新后，iframe路由状态丢失</li><li>dom 割裂严重，弹窗只能在 iframe 内展示</li><li>web应用之间通信困难</li><li>白屏时间很长</li></ol><h2 id="single-spa" tabindex="-1">single-spa <a class="header-anchor" href="#single-spa" aria-label="Permalink to &quot;single-spa&quot;">​</a></h2><p>实现思路</p><ol><li>预先注册子应用</li><li>监听路由变化，匹配到激活的路由则加载子应用</li></ol><h2 id="qiankun" tabindex="-1">qiankun <a class="header-anchor" href="#qiankun" aria-label="Permalink to &quot;qiankun&quot;">​</a></h2><p>简化、完善single-spa</p><p>优点：</p><ol><li>监听路由的自动加载、卸载当前路由对应的子应用</li><li>路由保持，浏览器刷新、前进、后退都可以作用到子应用</li><li>应用间通信简单，全局注入</li></ol><p>缺点：</p><ol><li>基于路由匹配，无法同时激活多个子应用，也不支持子应用保活</li><li>改造成本较大，从 webpack、代码、路由等都要做一系列的适配</li><li>无法支持vite等ESM脚本运行</li></ol><h2 id="wujie" tabindex="-1">wujie <a class="header-anchor" href="#wujie" aria-label="Permalink to &quot;wujie&quot;">​</a></h2><p>将子应用的js注入主应用同源的iframe中运行，iframe内部由完整的history和location接口，子应用实例instance运行在iframe中，路由也彻底和主应用解耦，可以直接在业务组件里启动业务</p><p>路由同步机制：通过劫持 iframe 内部的历史 API 操作,将子应用的 URL 同步到主应用的 URL 中,利用浏览器的会话历史机制,实现了主子应用之间无缝的路由同步</p><p>ifame连接机制和css沙箱机制：使用 webcompomponent 实现样式隔离，dom在主应用容器下的webcomponent内，通过代理iframe的document到webcomponent，实现两者的互联</p><p>通信机制：</p><ul><li>props 注入，通过 $wujie.props</li><li>window.parent</li><li>EventBus 实例</li></ul><p>优点：</p><ol><li>组件方式启动微前端</li><li>一个页面同时激活多个子应用</li><li>天然js沙箱</li><li>应用切换没有清理成本</li></ol>',23),n=[t];function r(s,p,c,m,d,h){return a(),i("div",null,n)}const u=e(o,[["render",r]]);export{f as __pageData,u as default};
